<h2>Categories</h2>

<div *ngIf="message" class="alert alert-info">{{ message }}</div>
<div *ngIf="error" class="alert alert-danger">{{ error }}</div>

<div class="row">
  <div class="col-md-5">
    <h5>Add category</h5>

    <form [formGroup]="form" (ngSubmit)="submit()">
      <div class="mb-2">
        <label>Name</label>
        <input class="form-control" formControlName="name" />
        <div class="text-danger mt-1" *ngIf="form.get('name')?.touched && form.get('name')?.invalid">
          Name is required (min 2 chars).
        </div>
      </div>

      <div class="mb-2">
        <label>Description</label>
        <input class="form-control" formControlName="description" />
      </div>

      <button class="btn btn-primary mt-2" type="submit">Create</button>
    </form>
  </div>

  <div class="col-md-7">
    <h5>All categories</h5>

    <div *ngIf="loading">Loading...</div>

    <table class="table table-striped table-sm" *ngIf="!loading">
      <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let c of categories">
        <td>{{ c.name }}</td>
        <td>{{ c.description || '-' }}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
